name: tsc

on:  
  push:  
    branches:  
      - main  

jobs:  
  build:  
    runs-on: ubuntu-latest  

    steps:  
      - name: Checkout repository  
        uses: actions/checkout@v2  

      - name: Set up Node.js  
        uses: actions/setup-node@v2  
        with:  
          node-version: '16' # specify the node version you prefer  
          registry-url: 'https://registry.npmjs.org/'  

      - name: Install dependencies  
        run: npm install  

      - name: Run TypeScript Compiler  
        run: npx tsc --noEmit # Check for TS errors  

      - name: Publish to npm  
        run: npm publish  
        env:  
          NODE_AUTH_TOKEN: ${{ secrets.NPM_AUTH_TOKEN }}
